<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <meta name="date" content="2023-10-16T16:21:41.251Z">
    <title>Access Control | Guide | @esri/hub.js</title>
    
    <meta name="description" content="A modular, high quality toolkit for working with ArcGIS Hub">
    
    <link rel="stylesheet" href="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.2.5/css/calcite-web.min.css">
    <link rel="stylesheet" href="/hub.js/css/style.css">
    
  </head>
  <body>
  <!-- Drawer -->
    <div class="drawer drawer-left js-drawer" data-drawer="top-nav" tabindex="0">
      <nav class="drawer-nav" role="navigation">
        <aside class="side-nav">
          <h2 class="side-nav-title">@esri/hub.js</h2>
          <a href="/hub.js/guides/" class="is-active side-nav-link">Guides</a>
          <a href="/hub.js/api/" class="side-nav-link">API Reference</a>
        </aside>
      </nav>
    </div>

    <div id="page" class="wrapper">
      <!-- Sample HTML -->
      <header class="top-nav">
        <div class="grid-container">
          <div class="column-24">
            <!-- desktop sized navigation -->
            <div class="tablet-hide">
              <!-- logo / home -->
              <a href="/hub.js/" class="top-nav-title">@esri/hub.js</a>
              <!-- primary navigation sections -->
              <nav class="top-nav-list" role="navigation" aria-labelledby="topnav">
                <a href="/hub.js/guides/" class="is-active top-nav-link">Guides</a>
                <a href="/hub.js/api/" class="top-nav-link">API Reference</a>
                <a href="https://github.com/Esri/hub.js" class="top-nav-link">GitHub</a>
              </nav>
            </div>

            <!-- tablet and mobile sized navigation -->
            <div class="tablet-show top-nav-flex">
              <!-- open primary navigation drawer -->
              <nav class="top-nav-flex-list" role="navigation" aria-labelledby="topnav">
                <a href="/hub.js/" class="icon-ui-menu top-nav-link js-drawer-toggle" data-drawer="top-nav"><span class="phone-hide">Menu</span></a>
              </nav>
              <!-- logo / home -->
              <header class="top-nav-flex-title">
                <a href="/hub.js/" class="top-nav-link">@esri/hub.js</a>
              </header>
            </div>
          </div>

        </div>
      </header>


      <main id="#skip-to-content">
        
  <div class="grid-container trailer-1 leader-1">
    <div class="column-6">
      <ul class="list-plain">
        
          <li>Intro</li>
          <ul class="list-plain margin-left-1">
            
              <li><a href="/hub.js/guides/intro/overview/">Overview</a></li>
            
              <li><a href="/hub.js/guides/intro/getting-started/">Getting Started</a></li>
            
          </ul>
        
          <li>Class Api</li>
          <ul class="list-plain margin-left-1">
            
              <li><a href="/hub.js/guides/classes/overview/">Overview</a></li>
            
              <li><a href="/hub.js/guides/classes/arcgiscontext/">Authentication</a></li>
            
              <li><a href="/hub.js/guides/classes/sites/">Sites (WIP)</a></li>
            
              <li><a href="/hub.js/guides/classes/pages/">Pages (WIP)</a></li>
            
              <li><a href="/hub.js/guides/classes/initiatives/">Initiatives (WIP)</a></li>
            
              <li><a href="/hub.js/guides/classes/projects/">Projects</a></li>
            
          </ul>
        
          <li>Functional Api</li>
          <ul class="list-plain margin-left-1">
            
              <li><a href="/hub.js/guides/functional/overview/">Overview</a></li>
            
              <li><a href="/hub.js/guides/functional/authentication/">Authentication</a></li>
            
              <li><a href="/hub.js/guides/functional/hub-search/">Hub Search</a></li>
            
              <li><a href="/hub.js/guides/functional/utilities/">Utilities</a></li>
            
              <li><a href="/hub.js/guides/functional/discussions/">Discussions</a></li>
            
              <li><a href="/hub.js/guides/functional/teams/">Teams</a></li>
            
              <li><a href="/hub.js/guides/functional/versioning/">Versioning</a></li>
            
          </ul>
        
          <li>Advanced</li>
          <ul class="list-plain margin-left-1">
            
              <li><a href="/hub.js/guides/advanced/access-control/" class="is-active">Access Control</a></li>
            
              <li><a href="/hub.js/guides/advanced/permissions/">Permissions</a></li>
            
              <li><a href="/hub.js/guides/advanced/operation-stack/">OperationStack</a></li>
            
              <li><a href="/hub.js/guides/advanced/metrics/">Metrics</a></li>
            
              <li><a href="/hub.js/guides/advanced/queries-and-filters/">Queries & Filters</a></li>
            
              <li><a href="/hub.js/guides/advanced/catalog-collection/">Catalogs & Collections</a></li>
            
              <li><a href="/hub.js/guides/advanced/composing-workflows/">Composing Workflows</a></li>
            
          </ul>
        
          <li>Developers</li>
          <ul class="list-plain margin-left-1">
            
              <li><a href="/hub.js/guides/developers/e2e-tests/">E2E Testing</a></li>
            
          </ul>
        
          <li>Legacy</li>
          <ul class="list-plain margin-left-1">
            
              <li><a href="/hub.js/guides/legacy/content-search/">Search Service</a></li>
            
              <li><a href="/hub.js/guides/legacy/sites-and-pages/">Sites and Pages</a></li>
            
          </ul>
        
      </ul>
    </div>

    <div class="column-18">
      <div class="panel">
        <h2>Access Control in ArcGIS Hub</h2>
<p>ArcGIS Hub is a collaboration system, and thus determining what actions a user can take, within a specific context is a common task, commonly referred to as &quot;access control&quot;</p>
<p>In Hub, all this is handled via &quot;Permissions&quot;</p>
<p>There are 5 elements to the Permission system:</p>
<ul>
<li>Permission Policies - the business rules embedded in the system</li>
<li>Entity Permission Policies - additional entity specific rules that further limit access</li>
<li>Entity Feature Flags - entity specific means to disable a feature,</li>
<li>System Feature Flags - globally override specific permissions</li>
<li>System Service Flags - globally disable a service to test graceful degradation UX</li>
</ul>
<p>For details, please read the <a href="../permissions">Permissions Guide</a></p>
<h2>High Level Model</h2>
<p>To determine if a user can take a specific action, in some context, the application calls <code>checkPermission(...): IPermissionAccessResponse</code>. The critical property on the response is <code>.access:boolean</code>, but the response also includes information on all the checks what we applied, as well as the reason access was denied, allowing a variety of different messages or behaviors to be implemented.</p>
<p>The <code>checkPermission(...)</code> call takes the following into account:</p>
<ul>
<li>status of any services the permission depends on</li>
<li>availability checks (<code>alpha</code>, <code>beta</code>, <code>general</code>)</li>
<li>environment checks (<code>devext</code>, <code>qaext</code>, <code>production</code>, <code>enterprise-sites</code>)</li>
<li>authentication status</li>
<li>platform privileges</li>
<li>if user is owner of the entity</li>
<li>if user has edit access to the entity</li>
<li>entity specific feature flags</li>
<li>system feature flags</li>
</ul>
<h2>General Logic when not passed an entity</h2>
<p><code>checkPermission(permission, context): IPermissionAccessResponse</code></p>
<ul>
<li>is this a valid permission?</li>
<li>is there a system policy defined for this permission?</li>
<li>is there a system feature flag set for this permission?
<ul>
<li>hold that flag value, overriding any set by the entity</li>
</ul>
</li>
<li>if there is a flag value, and it's <code>false</code>
<ul>
<li>return <code>access:false, reason: &quot;disabled-by-&lt;entity|feature&gt;-flag&quot;</code></li>
</ul>
</li>
<li>if there is a flag value, and it's <code>true</code>
<ul>
<li>run all checks other than <code>availability</code> and <code>environment</code></li>
</ul>
</li>
<li>if there is no flag set, run all checks</li>
<li>aggregate all policy checks, determine if access is granted</li>
<li>return IPermissionAccessResponse</li>
</ul>
<h2>General Logic when passed an entity</h2>
<p><code>checkPermission(permission, context, entity): IPermissionAccessResponse</code></p>
<ul>
<li>is this a valid permission?</li>
<li>is there a system policy defined for this permission?</li>
<li>is <code>.entityConfigurable:true</code> on the policy?
<ul>
<li>does the <code>entity.features</code> have a flag for this permission?
<ul>
<li>hold that flag value</li>
</ul>
</li>
</ul>
</li>
<li>is there a system feature flag set for this permission?
<ul>
<li>hold that flag value, overriding any set by the entity</li>
</ul>
</li>
<li>if there is a flag value, and it's <code>false</code>
<ul>
<li>return <code>access:false, reason: &quot;disabled-by-&lt;entity|feature&gt;-flag&quot;</code></li>
</ul>
</li>
<li>if there is a flag value, and it's <code>true</code>
<ul>
<li>run all checks other than <code>availability</code> and <code>environment</code></li>
</ul>
</li>
<li>if there is no flag set, run all checks</li>
<li>aggregate all policy checks, determine if access is granted</li>
<li>is there an Entity Policy for this permission?
<ul>
<li>run all Entity Policy checks</li>
<li>if no policy checks pass, access is denied</li>
</ul>
</li>
<li>return IPermissionAccessResponse</li>
</ul>
<h3>Developer Guidance</h3>
<p>As we build the next generation of the ArcGIS Hub system, want behavior to be “configurable by default” - meaning that we should design and build the UI layer by querying the Permissions subsystem, instead of implementing custom checks in-place. This will enable the system to adapt to different licensing, or packaging strategies, simply by changing the business rules, instead of making sweeping code changes.</p>
      </div>
    </div>
  </div>

      </main>
    </div>

    <footer class="footer">
      
      <div class="panel panel-white">
        <div class="grid-container">
          <div class="column-24">
            <a href="https://github.com/Esri/hub.js" class="font-size--2">Fork this project</a>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.2.5/js/calcite-web.min.js"></script>

    <script>
       calcite.init()
    </script>

    
  </body>
</html>