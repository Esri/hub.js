<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title>Working with Projects | Guide | @esri/hub.js</title>
    
    <meta name="description" content="A modular, high quality toolkit for working with ArcGIS Hub">
    
    <link rel="stylesheet" href="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.2.5/css/calcite-web.min.css">
    <link rel="stylesheet" href="/hub.js/css/style.css">
    
  </head>
  <body>
  <!-- Drawer -->
    <div class="drawer drawer-left js-drawer" data-drawer="top-nav" tabindex="0">
      <nav class="drawer-nav" role="navigation">
        <aside class="side-nav">
          <h2 class="side-nav-title">@esri/hub.js</h2>
          <a href="/hub.js/guides/" class="is-active side-nav-link">Guides</a>
          <a href="/hub.js/api/" class="side-nav-link">API Reference</a>
        </aside>
      </nav>
    </div>

    <div id="page" class="wrapper">
      <!-- Sample HTML -->
      <header class="top-nav">
        <div class="grid-container">
          <div class="column-24">
            <!-- desktop sized navigation -->
            <div class="tablet-hide">
              <!-- logo / home -->
              <a href="/hub.js/" class="top-nav-title">@esri/hub.js</a>
              <!-- primary navigation sections -->
              <nav class="top-nav-list" role="navigation" aria-labelledby="topnav">
                <a href="/hub.js/guides/" class="is-active top-nav-link">Guides</a>
                <a href="/hub.js/api/" class="top-nav-link">API Reference</a>
                <a href="https://github.com/Esri/hub.js" class="top-nav-link">GitHub</a>
              </nav>
            </div>

            <!-- tablet and mobile sized navigation -->
            <div class="tablet-show top-nav-flex">
              <!-- open primary navigation drawer -->
              <nav class="top-nav-flex-list" role="navigation" aria-labelledby="topnav">
                <a href="/hub.js/" class="icon-ui-menu top-nav-link js-drawer-toggle" data-drawer="top-nav"><span class="phone-hide">Menu</span></a>
              </nav>
              <!-- logo / home -->
              <header class="top-nav-flex-title">
                <a href="/hub.js/" class="top-nav-link">@esri/hub.js</a>
              </header>
            </div>
          </div>

        </div>
      </header>


      <main id="#skip-to-content">
        
  <div class="grid-container trailer-1 leader-1">
    <div class="column-6">
      <ul class="list-plain">
        
          <li>Get Started</li>
          <ul class="list-plain margin-left-1">
            
              <li><a href="/hub.js/guides/from-a-cdn/">From a CDN</a></li>
            
              <li><a href="/hub.js/guides/node/">Node.js</a></li>
            
              <li><a href="/hub.js/guides/using-es6/">Using ES6</a></li>
            
              <li><a href="/hub.js/guides/whats-new-v2-0/">What's New in v2.0.0</a></li>
            
          </ul>
        
          <li>Concepts</li>
          <ul class="list-plain margin-left-1">
            
              <li><a href="/hub.js/guides/authentication/">Authentication</a></li>
            
              <li><a href="/hub.js/guides/context/">Using ArcGISContext</a></li>
            
              <li><a href="/hub.js/guides/working-with-projects/" class="is-active">Working with Projects</a></li>
            
              <li><a href="/hub.js/guides/content-search/">Searching Content</a></li>
            
              <li><a href="/hub.js/guides/sites-and-pages/">Sites and Pages</a></li>
            
              <li><a href="/hub.js/guides/teams/">Hub Teams</a></li>
            
              <li><a href="/hub.js/guides/hub-discussions/">Hub Discussions</a></li>
            
              <li><a href="/hub.js/guides/work-with-annotations/">Map Annotations</a></li>
            
              <li><a href="/hub.js/guides/common/">Utilities</a></li>
            
              <li><a href="/hub.js/guides/operation-stack/">OperationStack</a></li>
            
              <li><a href="/hub.js/guides/composing-workflows/">Composing Workflows</a></li>
            
              <li><a href="/hub.js/guides/e2e-tests/">E2E Testing</a></li>
            
          </ul>
        
      </ul>
    </div>

    <div class="column-18">
      <div class="panel">
        <h2>Working with Projects</h2>
<p>Hub.js exposes a number of ways to work with Hub Projects. At the lowest level, you can simply import functions like <code>createProject</code>, <code>updateProject</code> etc, and work with them. This is ideal when you are looking to optimize the payload of an application which only needs to do a subset of operations.</p>
<p>The next level up is to use the <code>HubProjectManager</code> class. This class is instantiated with either an <code>ArcGISContextManager</code> or <code>IArcGISContext</code>. If your application needs to have a long-lived <code>HubProjectManager</code> then it's best to pass a reference to your app's <code>ArcGISContextManager</code> instance, so that when authentication changes, the <code>HubProjectManager</code> instance will have current information because of the shared reference.</p>
<p>For most applications, you can simply create a <code>HubProjectManager</code> using the <code>IArcGISContext</code>, do some operations, and then let the <code>HubProjectManager</code> instance be disposed.</p>
<p>The final option is to use the <code>Hub</code> class. We recommend this for scripting / automation tasks. Although you could build a web application using the <code>Hub</code> class, it will likely result in a very large build since classes are much more complex to &quot;tree shake&quot; so your applicatin will get the entire Hub system, despite likely only needing a few functions.</p>
<h3>In an Application</h3>
<p>We expect that most applications will leverage the <code>HubProjectManager</code> class, instantiated as needed with <code>IArcGISContext</code> from the application's <code>ArcGISContextManager.context</code>. The following example shows this pattern using Ember.js, but it would be generally the same in React etc.</p>
<h3>Ember.js Example</h3>
<p>Assuming the following routes in an app...</p>
<pre><code class="js"><span class="hljs-comment">//...snip...</span>
<span class="hljs-keyword">this</span>.route(<span class="hljs-string">"projects"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.route(<span class="hljs-string">"project"</span>, { <span class="hljs-attr">path</span>: <span class="hljs-string">"/:project_id"</span> }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.route(<span class="hljs-string">"edit"</span>);
  });
  <span class="hljs-keyword">this</span>.route(<span class="hljs-string">"edit"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.route(<span class="hljs-string">"new"</span>);
  });
});
<span class="hljs-comment">//...snip...</span>
</code></pre>
<h4>Create a Project</h4>
<p>To create a project in the <code>/projects/edit/new</code> controller...</p>
<pre><code class="js"><span class="hljs-keyword">import</span> Controller <span class="hljs-keyword">from</span> <span class="hljs-string">"@ember/controller"</span>;
<span class="hljs-keyword">import</span> { inject <span class="hljs-keyword">as</span> service } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ember/service"</span>;
<span class="hljs-keyword">import</span> { action } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ember/object"</span>;
<span class="hljs-keyword">import</span> { HubProjectManager } <span class="hljs-keyword">from</span> <span class="hljs-string">"@esri/hub-common"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">projectsEditNewController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span>{
  <span class="hljs-comment">// appSettings is a singleton service that holds an ArcGISContextManager instance</span>
  <span class="hljs-comment">// and exposes an `IArcGISContext` on a `.context` property</span>
  @service appSettings;

  @action
  <span class="hljs-keyword">async</span> createProject(project) {
    <span class="hljs-comment">// instantiate the project manager</span>
    <span class="hljs-keyword">const</span> projectMgr = HubProjectManager.init(appSettings.context);
    <span class="hljs-comment">// create the project and return the IHubProject instance</span>
    <span class="hljs-keyword">return</span> projectMgr.create(project);
  }
}
</code></pre>
<h4>Get a Project</h4>
<p>In the <code>/projects/:project_id</code> route, we get the project by id or slug</p>
<pre><code class="js"><span class="hljs-keyword">import</span> Route <span class="hljs-keyword">from</span> <span class="hljs-string">"@ember/routing/route"</span>;
<span class="hljs-keyword">import</span> { inject <span class="hljs-keyword">as</span> service } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ember/service"</span>;
<span class="hljs-keyword">import</span> { HubProjectManager } <span class="hljs-keyword">from</span> <span class="hljs-string">"@esri/hub-common"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProjectsProjectRoute</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Route</span> </span>{
  @service appSettings;

  model(params) {
    <span class="hljs-keyword">const</span> projectMgr = HubProjectManager.init(appSettings.context);
    <span class="hljs-keyword">return</span> projectMgr.get(params.project_id);
  }
}
</code></pre>
<h4>Update a Project</h4>
<p>In the <code>/projects/:project_id/edit</code> controller we update the project like this</p>
<pre><code class="js"><span class="hljs-keyword">import</span> Controller <span class="hljs-keyword">from</span> <span class="hljs-string">"@ember/controller"</span>;
<span class="hljs-keyword">import</span> { inject <span class="hljs-keyword">as</span> service } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ember/service"</span>;
<span class="hljs-keyword">import</span> { action } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ember/object"</span>;
<span class="hljs-keyword">import</span> { HubProjectManager } <span class="hljs-keyword">from</span> <span class="hljs-string">"@esri/hub-common"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">projectEditController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span>{
  @service appSettings;

  @action
  updateProject(project) {
    <span class="hljs-keyword">const</span> projectMgr = HubProjectManager.create(appSettings.context);
    <span class="hljs-keyword">return</span> projectMgr.update(project);
  }
}
</code></pre>
<h2>Automation Scripting</h2>
<p>If you need to create or manage a series of projects, you can do this via Node.js.</p>
<p>This example assumes you are using NodeJS v13 or higher, and have set <code>type: &quot;module&quot;</code> in your <code>package.json</code> file, allowing the use of <a href="https://nodejs.org/docs/latest-v12.x/api/packages.html#packages_determining_module_system">ES Modules</a> import syntax.</p>
<pre><code class="js"><span class="hljs-keyword">import</span> { Hub } <span class="hljs-keyword">from</span> <span class="hljs-string">"@esri/hub-common"</span>;
<span class="hljs-keyword">import</span> { UserSession } <span class="hljs-keyword">from</span> <span class="hljs-string">"@esri/arcgis-rest-auth"</span>;

<span class="hljs-comment">// create Hub instance</span>
<span class="hljs-keyword">const</span> myHub = <span class="hljs-keyword">await</span> Hub.create({
  <span class="hljs-attr">authOptions</span>: { <span class="hljs-attr">username</span>: <span class="hljs-string">"casey"</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">"abc123"</span> },
});

<span class="hljs-comment">// create a project</span>
<span class="hljs-keyword">let</span> project = myHub.projects.create({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Smith Street Curb Replacement"</span>,
  <span class="hljs-attr">summary</span>: <span class="hljs-string">"Replace/upgrade damaged curbs along Smith St. Scheduled for 2024"</span>,
  <span class="hljs-attr">status</span>: <span class="hljs-string">"active"</span>,
  <span class="hljs-attr">culture</span>: <span class="hljs-string">"en-us"</span>,
  <span class="hljs-attr">slug</span>: <span class="hljs-string">"smith-st-2024"</span>,
  <span class="hljs-attr">tags</span>: [<span class="hljs-string">"2024 Plan"</span>],
});
<span class="hljs-built_in">console</span>.info(<span class="hljs-string">`Created project <span class="hljs-subst">${project.name}</span> owned by <span class="hljs-subst">${project.owner}</span>`</span>);

<span class="hljs-comment">// assign a timeline and update</span>
project.timeline = {
  <span class="hljs-attr">title</span>: <span class="hljs-string">"Project Schedule"</span>,
  <span class="hljs-attr">timeframe</span>: <span class="hljs-string">"Summer 2024"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"Key dates for design and construction"</span>,
  <span class="hljs-attr">stages</span>: [
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">"Study Completed"</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">"Initial review of existing infrastructure"</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">"check-circle-f"</span>,
      <span class="hljs-attr">timeframe</span>: <span class="hljs-string">"Fall 2019"</span>,
      <span class="hljs-attr">id</span>: <span class="hljs-number">1638572046394</span>,
      <span class="hljs-attr">status</span>: <span class="hljs-string">"Complete"</span>,
      <span class="hljs-attr">isEditing</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">leadingElement</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">trailingElement</span>: <span class="hljs-literal">false</span>,
    },
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">"Environmental and Preliminary Design Completed"</span>,
      <span class="hljs-attr">timeframe</span>: <span class="hljs-string">"Fall 2019"</span>,
      <span class="hljs-attr">description</span>:
        <span class="hljs-string">"Work with Federal Highway Administration to secure environmental approval of designs"</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">"check-circle-f"</span>,
      <span class="hljs-attr">id</span>: <span class="hljs-number">1638572046399</span>,
      <span class="hljs-attr">status</span>: <span class="hljs-string">"Complete"</span>,
      <span class="hljs-attr">isEditing</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">leadingElement</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">trailingElement</span>: <span class="hljs-literal">false</span>,
    },
  ],
};

project = <span class="hljs-keyword">await</span> myHub.projects.update(project);

<span class="hljs-comment">// Destroy a project</span>
<span class="hljs-keyword">await</span> myHub.projects.destroy(<span class="hljs-string">"3efbc7..."</span>);
</code></pre>
<h3>In a Component</h3>
<p>When working with Hub Projects in Components, import the lower-level functions instead of using the <code>HubProjectManager</code>. This enables the Component build process to tree-shake out more code, resulting in a smaller build size.</p>
<p>Let's suppose you have a component that will fetch and display a project using either
the project's ID or slug. The component would have an attribute <code>identifier</code> that can take the slug or item id.</p>
<pre><code class="html"><span class="hljs-tag">&lt;<span class="hljs-name">arcgis-hub-project-view</span> <span class="hljs-attr">identifier</span>=<span class="hljs-string">"dcdev-smith-st-2024"</span> /&gt;</span>
</code></pre>
<p>In the component, import the <code>getProject</code> function from <code>@esri/hub-common</code>, and use that in the lifecycle hooks to load the project.</p>
<pre><code class="ts"><span class="hljs-keyword">import</span> { getProject } <span class="hljs-keyword">from</span> <span class="hljs-string">"@esri/hub-common"</span>;

<span class="hljs-keyword">async</span> componentWillLoad() {
  <span class="hljs-comment">// Note context should be set on the element as `IArcGISContext`</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.project &amp;&amp; <span class="hljs-keyword">this</span>.identifier &amp;&amp; <span class="hljs-keyword">this</span>.context) {
    <span class="hljs-keyword">this</span>.project = <span class="hljs-keyword">await</span> getProject(<span class="hljs-keyword">this</span>.identifier, <span class="hljs-keyword">this</span>.context.requestOptions);
  }
}
</code></pre>
      </div>
    </div>
  </div>

      </main>
    </div>

    <footer class="footer">
      
      <div class="panel panel-white">
        <div class="grid-container">
          <div class="column-24">
            <a href="https://github.com/Esri/hub.js" class="font-size--2">Fork this project</a>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.2.5/js/calcite-web.min.js"></script>

    <script>
       calcite.init()
    </script>

    
  </body>
</html>