<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <meta name="date" content="2024-03-27T22:33:23.017Z">
    <title>Work with annotations. | @esri/hub.js</title>
    
    <meta name="description" content="A modular, high quality toolkit for working with ArcGIS Hub">
    
    <link rel="stylesheet" href="/hub.js/css/calcite-web.min.css">
    <link rel="stylesheet" href="/hub.js/css/style.css">
    
    
  </head>
  <body>
  <!-- Drawer -->
    <div class="drawer drawer-left js-drawer" data-drawer="top-nav" tabindex="0">
      <nav class="drawer-nav" role="navigation">
        <aside class="side-nav">
          <h2 class="side-nav-title">@esri/hub.js</h2>
          <a href="/hub.js/guides/" class="side-nav-link">Guides</a>
          <a href="/hub.js/api/" class="side-nav-link">API Reference</a>
        </aside>
      </nav>
    </div>

    <div id="page" class="wrapper">
      <!-- Sample HTML -->
      <header class="top-nav">
        <div class="grid-container">
          <div class="column-24">
            <!-- desktop sized navigation -->
            <div class="tablet-hide">
              <!-- logo / home -->
              <a href="/hub.js/" class="top-nav-title">@esri/hub.js</a>
              <!-- primary navigation sections -->
              <nav class="top-nav-list" role="navigation" aria-labelledby="topnav">
                <a href="/hub.js/guides/" class="top-nav-link">Guides</a>
                <a href="/hub.js/api/" class="top-nav-link">API Reference</a>
                <a href="https://github.com/Esri/hub.js" class="top-nav-link">GitHub</a>
              </nav>
            </div>

            <!-- tablet and mobile sized navigation -->
            <div class="tablet-show top-nav-flex">
              <!-- open primary navigation drawer -->
              <nav class="top-nav-flex-list" role="navigation" aria-labelledby="topnav">
                <a href="/hub.js/" class="icon-ui-menu top-nav-link js-drawer-toggle" data-drawer="top-nav"><span class="phone-hide">Menu</span></a>
              </nav>
              <!-- logo / home -->
              <header class="top-nav-flex-title">
                <a href="/hub.js/" class="top-nav-link">@esri/hub.js</a>
              </header>
            </div>
          </div>

        </div>
      </header>


      <main id="#skip-to-content">
        <p>Annotations are geographic comments created by an Author to discuss an Initiative or Event or give feedback on a Dataset. Feedback can be submitted by both known and anonymous users.</p>
<p>Under the hood, the information is stored in an ArcGIS hosted feature service.</p>
<h2>Identify an existing annotation service.</h2>
<p>If an organization has already purchased ArcGIS Hub, then the url of it's annotation service can be identified using the technique below.</p>
<pre><code class="js"><span class="hljs-keyword">import</span> { getPortal } <span class="hljs-keyword">from</span> <span class="hljs-string">"@esri/arcgis-rest-portal"</span>;
<span class="hljs-keyword">import</span> { getAnnotationServiceUrl  } <span class="hljs-keyword">from</span> <span class="hljs-string">'@esri/hub-annotations'</span>;

<span class="hljs-comment">// first, use the org url to determine its unique id</span>
getPortal(<span class="hljs-string">"http://custom.maps.arcgis.com"</span>)
  .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> orgId = response.id;
    getAnnotationServiceUrl(orgId)
      .then(response) <span class="hljs-comment">// "https://services.arcgis.com/..."</span>
</code></pre>
<h2>Create a brand new annotation service.</h2>
<p>@esri/hub.js can also be used to <em>create</em> an ArcGIS Hub compatible annotation service in an ArcGIS Online Organization.</p>
<pre><code class="js"><span class="hljs-keyword">import</span> { UserSession } <span class="hljs-keyword">from</span> <span class="hljs-string">"@esri/arcgis-rest-auth"</span>;
<span class="hljs-keyword">import</span> { createAnnotationService } <span class="hljs-keyword">from</span> <span class="hljs-string">"@esri/hub-annotations"</span>;

<span class="hljs-comment">// user with sufficient privileges to create a new hosted feature service</span>
<span class="hljs-keyword">const</span> authentication = <span class="hljs-keyword">new</span> UserSession({
  <span class="hljs-attr">username</span>: <span class="hljs-string">"joe"</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">"shhhh"</span>
});

createAnnotationService({
  orgId,
  authentication
})
  .then(response) <span class="hljs-comment">// { success: true, itemId: "fe3" }</span>
</code></pre>
<h2>Submit anonymous comments</h2>
<p>If you are creating an application for posting anonymous feedback, hub.js has a helper for that as well.</p>
<pre><code class="js"><span class="hljs-keyword">import</span> { addAnnotations } <span class="hljs-keyword">from</span> <span class="hljs-string">"@esri/hub-annotations"</span>;

addAnnotations({
  <span class="hljs-attr">url</span>: annotationsUrl + <span class="hljs-string">"/0"</span>,
  <span class="hljs-attr">features</span>: [{
    <span class="hljs-attr">attributes</span>: {
      <span class="hljs-attr">target</span>: <span class="hljs-string">"http://..."</span>, <span class="hljs-comment">// the target of the comment</span>
      <span class="hljs-attr">description</span>: <span class="hljs-string">"A grand idea!"</span>, <span class="hljs-comment">// the actual comment</span>
      <span class="hljs-attr">source</span>: <span class="hljs-string">"your cool app"</span>
    }
  }]
})
  .then(response);
</code></pre>
      </main>
    </div>

    <footer class="footer">
      
      <div class="panel panel-white">
        <div class="grid-container">
          <div class="column-24">
            <a href="https://github.com/Esri/hub.js" class="font-size--2">Fork this project</a>
          </div>
        </div>
      </div>
    </footer>

    
    <script src="hub.js/js/calcite-web.min.js"></script>

    <script>
       calcite.init()
    </script>

    
  </body>
</html>